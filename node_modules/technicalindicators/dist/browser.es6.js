(function(e){'use strict';function r(e){return L[e]}function t(e){let t=r('precision');return t?parseFloat(e.toPrecision(t)):e}function a(e){R.reverseInputs(e);var r=new M(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function l(e){R.reverseInputs(e);var r=new j(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function o(e){R.reverseInputs(e);var r=new y(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function n(e){R.reverseInputs(e);var r=new O(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function s(e){R.reverseInputs(e);var r=new T(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function u(e){R.reverseInputs(e);var r=new W(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function i(e){R.reverseInputs(e);var r=new F(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function h(e){R.reverseInputs(e);var r=new G(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function p(e){R.reverseInputs(e);var r=new K(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function g(e){R.reverseInputs(e);var r=new N(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function v(e){R.reverseInputs(e);var r=new Z(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function d(e){R.reverseInputs(e);var r=new Q(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function c(e){R.reverseInputs(e);var r=new ee(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function m(e){R.reverseInputs(e);var r=new re(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function x(e){R.reverseInputs(e);var r=new te(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function w(e){R.reverseInputs(e);var r=new ae(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function f(e){R.reverseInputs(e);var r=new le(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function I(e){R.reverseInputs(e);var r=new oe(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function _(e){R.reverseInputs(e);var r=new ne(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function b(e){R.reverseInputs(e);var r=new se(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function C(e){R.reverseInputs(e);var r=new ue(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function P(e){R.reverseInputs(e);var r=new ie(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function q(e){R.reverseInputs(e);var r=new he(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function E(e){R.reverseInputs(e);var r=new pe(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}function V(e){R.reverseInputs(e);var r=new ve(e).result;return e.reversedInput&&(r.open.reverse(),r.high.reverse(),r.low.reverse(),r.close.reverse(),r.volume.reverse(),r.timestamp.reverse()),R.reverseInputs(e),r}function S(e){R.reverseInputs(e);var r=new de(e).result;return e.reversedInput&&(r.open.reverse(),r.high.reverse(),r.low.reverse(),r.close.reverse(),r.volume.reverse(),r.timestamp.reverse()),R.reverseInputs(e),r}var k=Math.min,A=Math.max,z=Math.abs;let L={};class D{}class R{constructor(e){this.format=e.format||t}static reverseInputs(e){e.reversedInput&&(e.values?e.values.reverse():void 0,e.open?e.open.reverse():void 0,e.high?e.high.reverse():void 0,e.low?e.low.reverse():void 0,e.close?e.close.reverse():void 0,e.volume?e.volume.reverse():void 0,e.timestamp?e.timestamp.reverse():void 0)}getResult(){return this.result}}class H{constructor(e,r,t){this.next=t,t&&(t.prev=this),this.prev=r,r&&(r.next=this),this.data=e}}class B{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new H(e,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(0!==this._length)return(this._length--,0===this._length)?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(0!==this._length)return(this._length--,0===this._length)?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new H(e,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||2>this._length?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(0!==this._length)return(this._length--,0===this._length)?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(void 0!==e)return this._next=e.next,this._current=e,e.data}}class M extends R{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){var r,t=new B,a=0,l=1,o=yield;for(t.push(0);;)l<e?(l++,t.push(o),a+=o):(a=a-t.shift()+o,r=a/e,t.push(o)),o=yield r}(this.period),this.generator.next(),this.result=[],this.price.forEach((e)=>{var r=this.generator.next(e);r.value!==void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}M.calculate=a;class j extends R{constructor(e){super(e);var r,t=e.period,a=e.values;this.result=[],r=new M({period:t,values:[]});this.generator=function*(){for(var e,a=yield;;)e&&a?(e=(a-e)*(2/(t+1))+e,a=yield e):(a=yield,e=r.nextValue(a),e&&(a=yield e))}(),this.generator.next(),this.generator.next(),a.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}j.calculate=l;class y extends R{constructor(e){super(e);var r=e.period,t=e.values;this.result=[],this.generator=function*(){for(let t=new B;;)if(t.length<r)t.push((yield));else{t.resetCursor();let a=0;for(let e=1;e<=r;e++)a+=t.next()*e/(r*(r+1)/2);var e=yield a;t.shift(),t.push(e)}}(),this.generator.next(),t.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}y.calculate=o;class O extends R{constructor(e){super(e);var r,t=e.period,a=e.values;this.result=[],r=new M({period:t,values:[]});this.generator=function*(){for(var e,a=yield;;)e&&void 0!=a?(e=(a-e)*(1/t)+e,a=yield e):(a=yield,e=r.nextValue(a),e&&(a=yield e))}(),this.generator.next(),this.generator.next(),a.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}O.calculate=n;class T extends R{constructor(e){super(e);var r=e.SimpleMAOscillator?M:j,t=e.SimpleMASignal?M:j,a=new r({period:e.fastPeriod,values:[],format:(e)=>e}),l=new r({period:e.slowPeriod,values:[],format:(e)=>e}),o=new t({period:e.signalPeriod,values:[],format:(e)=>e}),n=this.format;this.result=[],this.generator=function*(){for(var r,t,s,u,i,h,p=0;;){if(p<e.slowPeriod){r=yield,i=a.nextValue(r),h=l.nextValue(r),p++;continue}i&&h&&(t=i-h,s=o.nextValue(t)),u=t-s,r=yield{MACD:n(t),signal:s?n(s):void 0,histogram:isNaN(u)?void 0:n(u)},i=a.nextValue(r),h=l.nextValue(r)}}(),this.generator.next(),e.values.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(r.value)})}nextValue(e){var r=this.generator.next(e).value;return r}}T.calculate=s;class W extends R{constructor(e){super(e);let r=e.values,t=e.period,a=this.format;this.generator=function*(e){for(var r,t,l,o=yield,n=1,s=0;;)t=l?o-l:0,t=t?t:0,0<t&&(s+=t),n<e+1?n++:r?r=(r*(e-1)+(0<t?t:0))/e:r=s/e,l=o,r=r?a(r):void 0,o=yield r}(t),this.generator.next(),this.result=[],r.forEach((e)=>{var r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}W.calculate=u;class F extends R{constructor(e){super(e);let r=e.values,t=e.period,a=this.format;this.generator=function*(e){for(var r,t,l,o=yield,n=1,s=0;;)t=l?l-o:0,t=t?t:0,0<t&&(s+=t),n<e+1?n++:r?r=(r*(e-1)+(0<t?t:0))/e:r=s/e,l=o,r=r?a(r):void 0,o=yield r}(t),this.generator.next(),this.result=[],r.forEach((e)=>{var r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}F.calculate=i;class G extends R{constructor(e){super(e);var r=e.period,t=e.values,a=new W({period:r,values:[]}),l=new F({period:r,values:[]});let o=1;this.generator=function*(e){for(var r,t,n,s,u=yield;;)r=a.nextValue(u),t=l.nextValue(u),r&&t?0===t?s=100:(n=r/t,s=parseFloat((100-100/(1+n)).toFixed(2))):r&&!t?s=100:t&&!r?s=0:o>=e&&(s=0),o++,u=yield s}(r),this.generator.next(),this.result=[],t.forEach((e)=>{var r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}G.calculate=h;class X extends B{constructor(e,r,t){if(super(),this.size=e,this.maintainHigh=r,this.maintainLow=t,this.periodHigh=0,this.periodLow=Infinity,!e||'number'!=typeof e)throw'Size required and should be a number.';this._push=this.push,this.push=function(e){this.add(e)}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow()):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}class K extends R{constructor(e){super(e);var r=e.period,t=e.values,a=new M({period:r,values:[],format:(e)=>e});this.result=[],this.generator=function*(){var e,t,l=new X(r);e=yield;for(var o;;){if(l.push(e),t=a.nextValue(e),t){let e=0;for(let r of l.iterator())e+=Math.pow(r-t,2);o=Math.sqrt(e/r)}e=yield o}}(),this.generator.next(),t.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return this.format(r.value)}}K.calculate=p;class N extends R{constructor(e){super(e);var r,t,a=e.period,l=e.values,o=e.stdDev,n=this.format;this.result=[],r=new M({period:a,values:[],format:(e)=>e}),t=new K({period:a,values:[],format:(e)=>e}),this.generator=function*(){var e,a,l,s;for(a=yield;;){if(l=r.nextValue(a),s=t.nextValue(a),l){let r=n(l),t=n(l+s*o),u=n(l-s*o),i=n((a-u)/(t-u));e={middle:r,upper:t,lower:u,pb:i}}a=yield e}}(),this.generator.next(),l.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}N.calculate=g;class U extends R{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){for(var r=new B,t=0,a=1,l=yield,o=0;;)a<e?(a++,t+=l,o=void 0):a==e?(a++,t+=l,o=t):o=o-o/e+l,l=yield o}(this.period),this.generator.next(),this.result=[],this.price.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}U.calculate=function(e){R.reverseInputs(e);var r=new U(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r};class J extends R{constructor(e){super(e);var r=e.low,t=e.high,a=this.format;if(r.length!=t.length)throw'Inputs(low,high) not of equal size';this.result=[],this.generator=function*(){for(var e,r,t=yield;;){if(r){let l=t.high-r.high,o=r.low-t.low;e=a(o>l&&0<o?o:0)}r=t,t=yield e}}(),this.generator.next(),r.forEach((e,a)=>{var l=this.generator.next({high:t[a],low:r[a]});l.value!==void 0&&this.result.push(l.value)})}static calculate(e){R.reverseInputs(e);var r=new J(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}nextValue(e){return this.generator.next(e).value}}class Y extends R{constructor(e){super(e);var r=e.low,t=e.high,a=this.format;if(r.length!=t.length)throw'Inputs(low,high) not of equal size';this.result=[],this.generator=function*(){for(var e,r,t=yield;;){if(r){let l=t.high-r.high,o=r.low-t.low;e=a(l>o&&0<l?l:0)}r=t,t=yield e}}(),this.generator.next(),r.forEach((e,a)=>{var l=this.generator.next({high:t[a],low:r[a]});l.value!==void 0&&this.result.push(l.value)})}static calculate(e){R.reverseInputs(e);var r=new Y(e).result;return e.reversedInput&&r.reverse(),R.reverseInputs(e),r}nextValue(e){return this.generator.next(e).value}}class Z extends R{constructor(e){super(e);var r=e.low,t=e.high,a=e.close,l=this.format;if(r.length!=t.length)throw'Inputs(low,high) not of equal size';this.result=[],this.generator=function*(){for(var e,r,t=yield;;)void 0==e&&(e=t.close,t=yield r),r=A(t.high-t.low,isNaN(z(t.high-e))?0:z(t.high-e),isNaN(z(t.low-e))?0:z(t.low-e)),e=t.close,void 0!=r&&(r=l(r)),t=yield r}(),this.generator.next(),r.forEach((e,l)=>{var o=this.generator.next({high:t[l],low:r[l],close:a[l]});o.value!=void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}Z.calculate=v;class $ extends D{}class Q extends R{constructor(e){super(e);var r=e.low,t=e.high,a=e.close,l=e.period,o=this.format,n=new Y({high:[],low:[]}),s=new J({high:[],low:[]}),u=new U({period:l,values:[],format:(e)=>e}),i=new U({period:l,values:[],format:(e)=>e}),h=new U({period:l,values:[],format:(e)=>e}),p=new O({period:l,values:[],format:(e)=>e}),g=new Z({low:[],high:[],close:[]});if(r.length!==t.length||t.length!==a.length)throw'Inputs(low,high, close) not of equal size';this.result=[],$,this.generator=function*(){var e,r,t,a,l,o,v,d=yield;for(e=0,r=0,t=0;;){let e=g.nextValue(d),r=n.nextValue(d),t=s.nextValue(d);if(e===void 0){d=yield;continue}let c=h.nextValue(e),m=u.nextValue(r),x=i.nextValue(t);if(c!=void 0&&m!=void 0&&x!=void 0){a=100*m/c,l=100*x/c;let e=z(a-l),r=a+l;o=100*(e/r),v=p.nextValue(o)}d=yield{adx:v,pdi:a,mdi:l}}}(),this.generator.next(),r.forEach((e,l)=>{var n=this.generator.next({high:t[l],low:r[l],close:a[l]});n.value!=void 0&&n.value.adx!=void 0&&this.result.push({adx:o(n.value.adx),pdi:o(n.value.pdi),mdi:o(n.value.mdi)})})}nextValue(e){let r=this.generator.next(e).value;if(r!=void 0&&r.adx!=void 0)return{adx:this.format(r.adx),pdi:this.format(r.pdi),mdi:this.format(r.mdi)}}}Q.calculate=d;class ee extends R{constructor(e){super(e);var r=e.low,t=e.high,a=e.close,l=e.period,o=this.format;if(r.length!==t.length||t.length!==a.length)throw'Inputs(low,high, close) not of equal size';var n=new Z({low:[],high:[],close:[]}),s=new O({period:l,values:[],format:(e)=>e});this.result=[],this.generator=function*(){for(var e,r,t=yield;;)r=n.nextValue({low:t.low,high:t.high,close:t.close}),e=void 0===r?void 0:s.nextValue(r),t=yield e}(),this.generator.next(),r.forEach((e,l)=>{var n=this.generator.next({high:t[l],low:r[l],close:a[l]});n.value!==void 0&&this.result.push(o(n.value))})}nextValue(e){return this.generator.next(e).value}}ee.calculate=c;class re extends R{constructor(e){super(e);var r=e.period,t=e.values;this.result=[],this.generator=function*(){let e=1;for(var t,a=new X(r),l=yield;;)a.push(l),e<r?e++:t=100*((l-a.lastShift)/a.lastShift),l=yield t}(),this.generator.next(),t.forEach((e)=>{var r=this.generator.next(e);r.value==void 0||isNaN(r.value)||this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0&&!isNaN(r.value))return this.format(r.value)}}re.calculate=m;class te extends R{constructor(e){super(e);let r=e.values,t=e.ROCPer1,a=e.ROCPer2,l=e.ROCPer3,o=e.ROCPer4,n=e.SMAROCPer1,s=e.SMAROCPer2,u=e.SMAROCPer3,i=e.SMAROCPer4,h=e.signalPeriod,p=new re({period:t,values:[]}),g=new re({period:a,values:[]}),v=new re({period:l,values:[]}),d=new re({period:o,values:[]}),c=new M({period:n,values:[],format:(e)=>e}),m=new M({period:s,values:[],format:(e)=>e}),x=new M({period:u,values:[],format:(e)=>e}),w=new M({period:i,values:[],format:(e)=>e}),f=new M({period:h,values:[],format:(e)=>e});var I=this.format;this.result=[];let _=A(t+n,a+s,l+u,o+i);this.generator=function*(){for(let e,r,t,a,l,o,n,s=1,u=yield;;){let i=p.nextValue(u),h=g.nextValue(u),b=v.nextValue(u),C=d.nextValue(u);r=i===void 0?void 0:c.nextValue(i),t=h===void 0?void 0:m.nextValue(h),a=b===void 0?void 0:x.nextValue(b),l=C===void 0?void 0:w.nextValue(C),s<_?s++:e=1*r+2*t+3*a+4*l,o=e===void 0?void 0:f.nextValue(e),n=e===void 0?void 0:{kst:I(e),signal:o?I(o):void 0},u=yield n}}(),this.generator.next(),r.forEach((e)=>{let r=this.generator.next(e);r.value!=void 0&&this.result.push(r.value)})}nextValue(e){let r=this.generator.next(e);if(r.value!=void 0)return r.value}}te.calculate=x;class ae extends R{constructor(e){super(e);let r=e.high||[],t=e.low||[];this.result=[],this.generator=function*(e,r){for(let t,a,l,o,n=!0,s=e,u=yield;;)t?(l+=s*(a-l),n?(l=k(l,o.low,u.low),t.high>a&&(a=t.high,s=k(s+e,r))):(l=A(l,o.high,u.high),t.low<a&&(a=t.low,s=k(s+e,r))),(n&&t.low<l||!n&&t.high>l)&&(s=e,l=a,n=!n,a=n?t.high:t.low)):(l=u.low,a=u.high),o=u,t&&(u=t),t=yield l}(e.step,e.max),this.generator.next(),t.forEach((e,a)=>{var l=this.generator.next({high:r[a],low:t[a]});l.value!==void 0&&this.result.push(l.value)})}nextValue(e){let r=this.generator.next(e);if(r.value!==void 0)return r.value}}ae.calculate=w;class le extends R{constructor(e){super(e);let r=e.low,t=e.high,a=e.close,l=e.period,o=e.signalPeriod,n=this.format;if(r.length!==t.length||t.length!==a.length)throw'Inputs(low,high, close) not of equal size';this.result=[],this.generator=function*(){let e,r,t=1,a=new X(l,!0,!1),s=new X(l,!1,!0),u=new M({period:o,values:[],format:(e)=>e});for(var i=yield;;){if(a.push(i.high),s.push(i.low),t<l){t++,i=yield;continue}let o=s.periodLow;e=100*((i.close-o)/(a.periodHigh-o)),r=u.nextValue(e),i=yield{k:n(e),d:r?n(r):void 0}}}(),this.generator.next(),r.forEach((e,l)=>{var o=this.generator.next({high:t[l],low:r[l],close:a[l]});o.value!==void 0&&this.result.push(o.value)})}nextValue(e){let r=this.generator.next(e);if(r.value!==void 0)return r.value}}le.calculate=f;class oe extends R{constructor(e){super(e);let r=e.low,t=e.high,a=e.close,l=e.period,o=this.format;if(r.length!==t.length||t.length!==a.length)throw'Inputs(low,high, close) not of equal size';this.result=[],this.generator=function*(){let e,r,t=1,a=new X(l,!0,!1),n=new X(l,!1,!0);var s=yield;for(let u;;){if(a.push(s.high),n.push(s.low),t<l){t++,s=yield;continue}e=n.periodLow,r=a.periodHigh,u=o(-100*((r-s.close)/(r-e))),s=yield u}}(),this.generator.next(),r.forEach((e,l)=>{var o=this.generator.next({high:t[l],low:r[l],close:a[l]});o.value!==void 0&&this.result.push(o.value)})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return this.format(r.value)}}oe.calculate=I;class ne extends R{constructor(e){super(e);var r=e.high,t=e.low,a=e.close,l=e.volume;if(t.length!==r.length||r.length!==a.length||r.length!==l.length)throw'Inputs(low,high, close, volumes) not of equal size';this.result=[],this.generator=function*(){var e,r=0;for(e=yield;;){let t=(e.close-e.low-(e.high-e.close))/(e.high-e.low),a=t*e.volume;r+=a,e=yield Math.round(r)}}(),this.generator.next(),r.forEach((e,r)=>{var o={high:e,low:t[r],close:a[r],volume:l[r]},n=this.generator.next(o);n.value!=void 0&&this.result.push(n.value)})}nextValue(e){return this.generator.next(e).value}}ne.calculate=_;class se extends R{constructor(e){super(e);var r=e.close,t=e.volume;this.result=[],this.generator=function*(){var e,r,t=0;for(e=yield,e.close&&'number'==typeof e.close&&(r=e.close,e=yield);;)r<e.close?t+=e.volume:e.close<r&&(t-=e.volume),r=e.close,e=yield t}(),this.generator.next(),r.forEach((e,a)=>{let l={close:r[a],volume:t[a]},o=this.generator.next(l);o.value!=void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}se.calculate=b;class ue extends R{constructor(e){super(e);let r=e.values,t=e.period,a=this.format,l=new j({period:t,values:[],format:(e)=>e}),o=new j({period:t,values:[],format:(e)=>e}),n=new j({period:t,values:[],format:(e)=>e}),s=new re({period:1,values:[],format:(e)=>e});this.result=[],this.generator=function*(){for(let e=yield;;){let r=l.nextValue(e),t=r?o.nextValue(r):void 0,u=t?n.nextValue(t):void 0,i=u?s.nextValue(u):void 0;e=yield i?a(i):void 0}}(),this.generator.next(),r.forEach((e)=>{let r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){let r=this.generator.next(e);if(r.value!==void 0)return r.value}}ue.calculate=C;class ie extends R{constructor(e){super(e);var r=e.close,t=e.volume,a=e.period||1;if(t.length!==r.length)throw'Inputs(volume, close) not of equal size';let l=new j({values:[],period:a});this.result=[],this.generator=function*(){var e=yield,r=yield;for(let t;;)t=(r.close-e.close)*r.volume,e=r,r=yield l.nextValue(t)}(),this.generator.next(),t.forEach((e,a)=>{var l=this.generator.next({close:r[a],volume:t[a]});l.value!=void 0&&this.result.push(l.value)})}nextValue(e){let r=this.generator.next(e).value;if(r!=void 0)return r}}ie.calculate=P;class he extends R{constructor(e){super(e);var r=e.low,t=e.high,a=e.close,l=e.period,o=this.format;var n=new X(l),s=new M({period:l,values:[],format:(e)=>e});if(r.length!==t.length||t.length!==a.length)throw'Inputs(low,high, close) not of equal size';this.result=[],this.generator=function*(){for(var e=yield;;){let r=(e.high+e.low+e.close)/3;n.push(r);let t,a=s.nextValue(r),l=null,o=0;if(a!=void 0){for(let e of n.iterator())o+=z(e-a);l=o/20,t=(r-a)/(.015*l)}e=yield t}}(),this.generator.next(),r.forEach((e,l)=>{var o=this.generator.next({high:t[l],low:r[l],close:a[l]});o.value!=void 0&&this.result.push(o.value)})}nextValue(e){let r=this.generator.next(e).value;if(r!=void 0)return r}}he.calculate=q;class pe extends R{constructor(e){super(e);var r=e.low,t=e.high,a=e.close,l=e.volume,o=e.period,n=this.format;if(r.length!==t.length||t.length!==a.length)throw'Inputs(low,high, close) not of equal size';this.result=[],this.generator=function*(){var e=yield;for(let r=0,t=0;;){let a=(e.high+e.low+e.close)/3,l=e.volume*a;r+=l,t+=e.volume,e=yield r/t}}(),this.generator.next(),r.forEach((e,o)=>{var n=this.generator.next({high:t[o],low:r[o],close:a[o],volume:l[o]});n.value!=void 0&&this.result.push(n.value)})}nextValue(e){let r=this.generator.next(e).value;if(r!=void 0)return r}}pe.calculate=E;class ge{constructor(){this.open=[],this.high=[],this.low=[],this.close=[],this.volume=[],this.timestamp=[]}}class ve extends R{constructor(e){super(e);this.format;let r=e.useATR,t=e.brickSize||0;if(r){let r=c(Object.assign({},e));t=r[r.length-1]}if(this.result=new ge,0===t)return void console.error('Not enough data to calculate brickSize for renko when using ATR');let a=0,l=0,o=Infinity,n=0,s=0,u=0;this.generator=function*(){for(let e=yield;;){if(0==a){a=e.close,l=e.high,o=e.low,n=e.close,s=e.volume,u=e.timestamp,e=yield;continue}let r=z(e.close-n),i=z(e.close-a);if(r>=t&&i>=t){let u=r>i?a:n,h={open:u,high:l>e.high?l:e.high,low:o<e.Low?o:e.low,close:u>e.close?u-t:u+t,volume:s+e.volume,timestamp:e.timestamp};a=h.open,l=h.close,o=h.close,n=h.close,s=0,e=yield h}else l=l>e.high?l:e.high,o=o<e.Low?o:e.low,s+=e.volume,u=e.timestamp,e=yield}}(),this.generator.next(),e.low.forEach((r,t)=>{var a=this.generator.next({open:e.open[t],high:e.high[t],low:e.low[t],close:e.close[t],volume:e.volume[t],timestamp:e.timestamp[t]});a.value&&(this.result.open.push(a.value.open),this.result.high.push(a.value.high),this.result.low.push(a.value.low),this.result.close.push(a.value.close),this.result.volume.push(a.value.volume),this.result.timestamp.push(a.value.timestamp))})}nextValue(){return console.error('Cannot calculate next value on Renko, Every value has to be recomputed for every change, use calcualte method'),null}}ve.calculate=V;class de extends R{constructor(e){super(e);this.format;this.result=new ge;let r=null,t=0,a=Infinity,l=0,o=0,n=0;this.generator=function*(){for(let e=yield,s=null;;){if(null==r)r=(e.close+e.open)/2,t=e.high,a=e.low,l=(e.close+e.open+e.high+e.low)/4,o=e.volume||0,n=e.timestamp||0,s={open:r,high:t,low:a,close:l,volume:e.volume||0,timestamp:e.timestamp||0};else{let o=(e.close+e.open+e.high+e.low)/4,n=(r+l)/2,u=A(n,o,e.high),i=k(e.low,n,o);s={close:o,open:n,high:u,low:i,volume:e.volume||0,timestamp:e.timestamp||0},l=o,r=n,t=u,a=i}e=yield s}}(),this.generator.next(),e.low.forEach((r,t)=>{var a=this.generator.next({open:e.open[t],high:e.high[t],low:e.low[t],close:e.close[t],volume:e.volume?e.volume[t]:e.volume,timestamp:e.timestamp?e.timestamp[t]:e.timestamp});a.value&&(this.result.open.push(a.value.open),this.result.high.push(a.value.high),this.result.low.push(a.value.low),this.result.close.push(a.value.close),this.result.volume.push(a.value.volume),this.result.timestamp.push(a.value.timestamp))})}nextValue(e){var r=this.generator.next(e).value;return r}}de.calculate=S;class ce{constructor(){}approximateEqual(e,r){let t=1*parseFloat(z(e-r).toPrecision(4)),a=1*parseFloat((1e-3*e).toPrecision(4));return t<=a}logic(){throw'this has to be implemented'}getAllPatternIndex(e){if(e.close.length<this.requiredCount)return console.warn('Data count less than data required for the strategy ',this.name),[];e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());let r=this.logic;return this._generateDataForCandleStick(e).map((e,t)=>r.call(this,e)?t:void 0).filter((e)=>e)}hasPattern(e){if(e.close.length<this.requiredCount)return console.warn('Data count less than data required for the strategy ',this.name),!1;e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());let r=this.logic;return r.call(this,this._getLastDataForCandleStick(e))}_getLastDataForCandleStick(e){let r=this.requiredCount;if(e.close.length===r)return e;else{let t={open:[],high:[],low:[],close:[]},a=0,l=e.close.length-r;for(;a<r;)t.open.push(e.open[l+a]),t.high.push(e.high[l+a]),t.low.push(e.low[l+a]),t.close.push(e.close[l+a]),a++;return t}}_generateDataForCandleStick(e){let r=this.requiredCount,t=e.close.map(function(t,a){let l=0,o={open:[],high:[],low:[],close:[]};for(;l<r;)o.open.push(e.open[a+l]),o.high.push(e.high[a+l]),o.low.push(e.low[a+l]),o.close.push(e.close[a+l]),l++;return o}).filter((t,a)=>a<=e.close.length-r);return t}}class me extends ce{constructor(){super(),this.name='MorningStar',this.requiredCount=3}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return t<r&&l>u&&l>s&&s<l&&u<l&&i>s&&n<i&&i<h&&h>(r+t)/2}}class xe extends ce{constructor(){super(),this.name='BullishEngulfingPattern',this.requiredCount=2}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return t<r&&r>o&&t>o&&r<n}}class we extends ce{constructor(){super(),this.requiredCount=2,this.name='BullishHarami'}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return r<o&&t>o&&t>n&&r<u&&a>s}}class fe extends ce{constructor(){super(),this.requiredCount=2,this.name='BullishHaramiCross'}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=this.approximateEqual(o,n);return r<o&&t>o&&t>n&&r<u&&a>s&&i}}class Ie extends ce{constructor(){super(),this.name='Doji',this.requiredCount=1}logic(e){let r=e.open[0],t=e.close[0];return this.approximateEqual(r,t)}}class _e extends ce{constructor(){super(),this.name='MorningDojiStar',this.requiredCount=3}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],v=new Ie().hasPattern({open:[o],close:[n],high:[s],low:[u]});return t<r&&v&&i<h&&s<l&&u<l&&i>s&&n<i&&h>(r+t)/2}}class be extends ce{constructor(){super(),this.requiredCount=3,this.name='DownsideTasukiGap'}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return t<r&&n<o&&h>i&&s<l&&o>i&&n<i&&h>o&&h<t}}class Ce extends ce{constructor(){super(),this.name='BullishMarubozu',this.requiredCount=1}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=this.approximateEqual(t,a)&&this.approximateEqual(l,r)&&r<t&&r<a;return o}}class Pe extends ce{constructor(){super(),this.requiredCount=2,this.name='PiercingLine'}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return u<l&&t<r&&l>o&&n>(r+t)/2&&n>o}}class qe extends ce{constructor(){super(),this.name='ThreeWhiteSoldiers',this.requiredCount=3}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return s>a&&p>s&&r<t&&o<n&&i<h&&t>o&&o<a&&s>i&&i<n}}let Ee=[new xe,new be,new we,new fe,new _e,new me,new Ce,new Pe,new qe];class Ve extends ce{constructor(){super(),this.name='Bullish Candlesticks'}hasPattern(e){return Ee.reduce(function(r,t){let a=t.hasPattern(e);return a&&console.log('Matched pattern ',t.name),r||a},!1)}}class Se extends ce{constructor(){super(),this.name='BearishEngulfingPattern',this.requiredCount=2}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return t>r&&r<o&&t<o&&r>n}}class ke extends ce{constructor(){super(),this.requiredCount=2,this.name='BearishHarami'}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return r>o&&t<o&&t<n&&r>u&&a>s}}class Ae extends ce{constructor(){super(),this.requiredCount=2,this.name='BearishHaramiCross'}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=this.approximateEqual(o,n);return r>o&&t<o&&t<n&&r>u&&a>s&&i}}class ze extends ce{constructor(){super(),this.name='EveningDojiStar',this.requiredCount=3}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],v=new Ie().hasPattern({open:[o],close:[n],high:[s],low:[u]});return t>r&&v&&s>a&&u>a&&i<u&&n>i&&i>h&&h<(r+t)/2}}class Le extends ce{constructor(){super(),this.name='EveningStar',this.requiredCount=3}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return t>r&&a<u&&a<s&&s>a&&u>a&&i<u&&n>i&&i>h&&h<(r+t)/2}}class De extends ce{constructor(){super(),this.name='BearishMarubozu',this.requiredCount=1}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=this.approximateEqual(r,a)&&this.approximateEqual(l,t)&&r>t&&r>l;return o}}class Re extends ce{constructor(){super(),this.name='ThreeBlackCrows',this.requiredCount=3}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return l>u&&u>g&&r>t&&o>n&&i>h&&r>o&&o>t&&o>i&&i>n}}let He=[new Se,new ke,new Ae,new ze,new Le,new De,new Re];class Be extends ce{constructor(){super(),this.name='Bearish Candlesticks'}hasPattern(e){return He.reduce(function(r,t){return r||t.hasPattern(e)},!1)}}class Me extends ce{constructor(){super(),this.name='AbandonedBaby',this.requiredCount=3}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],v=new Ie().hasPattern({open:[o],close:[n],high:[s],low:[u]});return t<r&&v&&s<l&&g>s&&h>i&&p<r}}class je extends ce{constructor(){super(),this.name='DarkCloudCover',this.requiredCount=2}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return t>r&&n<o&&o>a&&n<(t+r)/2&&n>r}}class ye extends ce{constructor(){super(),this.requiredCount=1,this.name='DragonFlyDoji'}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=this.approximateEqual(r,t),o=this.approximateEqual(r,a);return l&&o}}class Oe extends ce{constructor(){super(),this.requiredCount=1,this.name='GraveStoneDoji'}logic(e){let r=e.open[0],t=e.close[0],a=e.low[0],l=this.approximateEqual(r,t),o=this.approximateEqual(r,a);return l&&o}}class Te extends ce{constructor(){super(),this.name='BullishSpinningTop',this.requiredCount=1}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=z(t-r),n=z(a-t),s=z(r-l);return o<n&&o<s}}class We extends ce{constructor(){super(),this.name='BearishSpinningTop',this.requiredCount=1}logic(e){let r=e.open[0],t=e.close[0],a=e.high[0],l=e.low[0],o=z(t-r),n=z(a-r),s=z(a-l);return o<n&&o<s}}e.getAvailableIndicators=function(){return['sma','ema','wma','wema','macd','rsi','bollingerbands','adx','atr','truerange','roc','kst','psar','stochastic','williamsr','adl','obv','trix','cci','forceindex','vwap','renko','heikinashi','averagegain','averageloss','sd','bullish','bearish','abandonedbaby','doji','bearishengulfingpattern','bullishengulfingpattern','darkcloudcover','downsidetasukigap','dragonflydoji','gravestonedoji','bullishharami','bearishharami','bullishharamicross','bearishharamicross','eveningdojistar','eveningstar','morningdojistar','morningstar','bullishmarubozu','bearishmarubozu','piercingline','bullishspinningtop','bearishspinningtop','threeblackcrows','threewhitesoldiers']},e.sma=a,e.SMA=M,e.ema=l,e.EMA=j,e.wma=o,e.WMA=y,e.wema=n,e.WEMA=O,e.macd=s,e.MACD=T,e.rsi=h,e.RSI=G,e.bollingerbands=g,e.BollingerBands=N,e.adx=d,e.ADX=Q,e.atr=c,e.ATR=ee,e.truerange=v,e.TrueRange=Z,e.roc=m,e.ROC=re,e.kst=x,e.KST=te,e.psar=w,e.PSAR=ae,e.stochastic=f,e.Stochastic=le,e.williamsr=I,e.WilliamsR=oe,e.adl=_,e.ADL=ne,e.obv=b,e.OBV=se,e.trix=C,e.TRIX=ue,e.forceindex=P,e.ForceIndex=ie,e.cci=q,e.CCI=he,e.vwap=E,e.VWAP=pe,e.averagegain=u,e.AverageGain=W,e.averageloss=i,e.AverageLoss=F,e.sd=p,e.SD=K,e.renko=V,e.HeikinAshi=de,e.heikinashi=S,e.bullish=function(e){return new Ve().hasPattern(e)},e.bearish=function(e){return new Be().hasPattern(e)},e.abandonedbaby=function(e){return new Me().hasPattern(e)},e.doji=function(e){return new Ie().hasPattern(e)},e.bearishengulfingpattern=function(e){return new Se().hasPattern(e)},e.bullishengulfingpattern=function(e){return new xe().hasPattern(e)},e.darkcloudcover=function(e){return new je().hasPattern(e)},e.downsidetasukigap=function(e){return new be().hasPattern(e)},e.dragonflydoji=function(e){return new ye().hasPattern(e)},e.gravestonedoji=function(e){return new Oe().hasPattern(e)},e.bullishharami=function(e){return new we().hasPattern(e)},e.bearishharami=function(e){return new ke().hasPattern(e)},e.bullishharamicross=function(e){return new fe().hasPattern(e)},e.bearishharamicross=function(e){return new Ae().hasPattern(e)},e.eveningdojistar=function(e){return new ze().hasPattern(e)},e.eveningstar=function(e){return new Le().hasPattern(e)},e.morningdojistar=function(e){return new _e().hasPattern(e)},e.morningstar=function(e){return new me().hasPattern(e)},e.bullishmarubozu=function(e){return new Ce().hasPattern(e)},e.bearishmarubozu=function(e){return new De().hasPattern(e)},e.piercingline=function(e){return new Pe().hasPattern(e)},e.bullishspinningtop=function(e){return new Te().hasPattern(e)},e.bearishspinningtop=function(e){return new We().hasPattern(e)},e.threeblackcrows=function(e){return new Re().hasPattern(e)},e.threewhitesoldiers=function(e){return new qe().hasPattern(e)},e.fibonacciretracement=function(e,r){let t,a=[0,23.6,38.2,50,61.8,78.6,100,127.2,161.8,261.8,423.6];return t=e<r?a.map(function(t){let a=r-z(e-r)*t/100;return 0<a?a:0}):a.map(function(t){let a=r+z(e-r)*t/100;return 0<a?a:0}),t},e.setConfig=function(e,r){L[e]=r},e.getConfig=r})(this.window=this.window||{});
//# sourceMappingURL=browser.es6.js.map
